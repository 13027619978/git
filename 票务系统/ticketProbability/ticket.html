<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>什刹海购票</title>
	</head>
	<body>
		
		<script src="js/jquery.min.js"></script>
		<script src="js/app.js"></script>
		<script src="js/index.js?v=10"></script>
		<script type="text/javascript">
			$(function(){
				app.getAjax('getTicketProbability', {}, function(res){
					console.log(res);
					var ybyTicket = res.data.ybyTicket;  // 同程
					var ymyTicket = res.data.ymyTicket;  // 胡同游
					var fhlTicket = res.data.fhlTicket;  // 自营什刹海
					var yjTicket = res.data.yjTicket;  // 宇嘉
					var ticketArr = [
						{
							name: 'yby',
							ticket: ybyTicket
						},
						{
							name: 'ymy',
							ticket: ymyTicket
						},
						{
							name: 'fhl',
							ticket: fhlTicket
						},
						{
							name: 'yj',
							ticket: yjTicket
						}
					]
					var ticketNumber = Math.floor(Math.random() * (100 - 0)) + 0;
					var ticketItem = {};
					if(ticketNumber < parseInt(ticketArr[0].ticket)){
						ticketItem = ticketArr[0];
					}else if(parseInt(ticketArr[0].ticket) <= ticketNumber && ticketNumber < parseInt(ticketArr[0].ticket) + parseInt(ticketArr[1].ticket)){
						ticketItem = ticketArr[1];
					}else if(parseInt(ticketArr[0].ticket) + parseInt(ticketArr[1].ticket) <= ticketNumber && ticketNumber < parseInt(ticketArr[0].ticket) + parseInt(ticketArr[1].ticket) + parseInt(ticketArr[2].ticket)){
						ticketItem = ticketArr[2];
					}else if(parseInt(ticketArr[0].ticket) + parseInt(ticketArr[1].ticket) + parseInt(ticketArr[2].ticket) <= ticketNumber && ticketNumber < parseInt(ticketArr[0].ticket) + parseInt(ticketArr[1].ticket) + parseInt(ticketArr[2].ticket) + parseInt(ticketArr[3].ticket)){
						ticketItem = ticketArr[3];
					}
					console.log(ticketItem.name);
					if(ticketItem.name == 'yby'){
						// 同程
						window.location.replace('tc.html');
					}else if(ticketItem.name == 'ymy'){
						// 胡同游
						window.location.replace('hty.html');
					}else if(ticketItem.name == 'fhl'){
						// 三海自营
						window.location.replace('https://boss.smart-ideas.com.cn/ticket-web?enterpriseCode=TgsEpcSh&ticketGroupNum=TGN20211223142734998');
					}else if(ticketItem.name == 'yj'){
						// 宇嘉
						window.location.replace('yj.html');
					}
				})
			})
		</script>
	</body>
</html>
