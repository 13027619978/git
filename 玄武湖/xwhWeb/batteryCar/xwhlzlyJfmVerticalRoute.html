<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="css/reset.css?v=10">
		<link rel="stylesheet" href="css/xwhXwmJfm.css?v=1.0.0">
		<style type="text/css">
			.qly .routeDetail{
				padding-bottom: 0;
			}
			.qly .siteList{
				border: none;
				height: 0;
			}
			.line{
				display: block;
				width: 100%;
				height: 5px;
				background-color: red;
			}
			.qly .siteItem:nth-of-type(1) {
			    left: -53px;
			    top: 50%;
			    margin-top: -40px;
			}
			.qly .siteItem:nth-of-type(2) {
			    left: 760px;
			    top: 50%;
			    margin-top: -40px;
			}
			.ticketList{
				display: flex;
				justify-content: flex-start;
				align-items: center;
			}
			.ticketTitle{
				width: 50%;
			}
		</style>
		<title></title>
	</head>
	<body>
		<div class="hoverView">
			
		</div>
		<div class="container">
			<div class="fullScreen">
				<div class="topView">
					<div class="weatherView">
						<!-- <p class="weatherTxt"></p> -->
						<img src="img/logo.png" >
					</div>
					<div class="titleView">
						<p>玄武湖观光车智慧运营系统</p>
					</div>
					<div class="timeView">
						<p class="dateTxt"></p>
						<p class="weatherTxt"></p>
					</div>
				</div>
				<div class="content">
					<div class="content-left">
						<!-- 购票流程 -->
						<div class="progress">
							<p class="siteNameTitle">当前站点：解放门站</p>
						</div>
						
						<div class="lineView">
							<!-- 路线 -->
							<div class="lineList">
								<div class="lineItem qly">
									<div class="routeView">
										<div>
											<p class="routeTitle">菱洲乐园专线</p>
											<p class="routeSecondTitle">单向行驶</p>
										</div>
										<div class="routeContent">
											<div class="routeDetail">
												<span class="line"></span>
												<div class="siteList nhx">
													<div class="siteItem">
														<div class="site">
															<p class="siteName"></p>
															<img src="img/currSite.png" >
															<p class="siteName active">解放门</p>
														</div>
													</div>
													
													<div class="siteItem">
														<div class="site">
															<p class="siteName"></p>
															<img src="img/site-unSelect.png" >
															<p class="siteName">菱洲乐园</p>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							
						</div>
						
						<div class="mapView">
							<p class="mapTitle">地图</p>
							<div class="mapImg">
								<img src="img/lzlyjfm.jpg" >
							</div>
						</div>
						
						<!-- 购票 -->
						<div class="ticketView">
							<div class="ticketItem">
								<p class="itemTitle">菱洲乐园专线</p>
								<div class="ticketList">
									<p class="ticketTitle">单次票：10元/人</p>
									<p class="ticketTitle">往返票：16元/人</p>
								</div>
								<p>持一卡通实体卡购票的游客请联系客服：025-83615961</p>
								<p>1. 身高1.1米以下儿童可免费乘坐观光车（不占座），身高1.1米及以上需购票乘车。</p>
								<p>2. 出于对安全乘车考虑，每位成人只可携带1名身高1.1米以下儿童免费乘车。</p>
								<p>3. 运营时间：<font class="yytime">09:00-17:00</font></p>
								<p>投诉电话：025-83615961</p>
							</div>
						</div>
					</div>
					<p class="bottomTitle">身高1.1米以下儿童可免费乘坐观光车（不占座），身高1.1米及以上需购票乘车。出于对安全乘车的考虑，每名成人只可携带1名身高1.1米以下儿童免费乘车。</p>
				</div>
				
			</div>
			
			<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=c1b024a249b04326f11894fd0e35041d"></script>
			<script src="js/jquery.min.js"></script>
			<script src="js/app.js"></script>
			<script type="text/javascript">
				var scale =  window.innerHeight / ($('.fullScreen').height() + 20);
				$('.fullScreen').css({
					'transform': 'scaleY(.96)'
				})
				
				
				// 获取天气信息
				$.ajax({
				    url:'https://restapi.amap.com/v3/weather/weatherInfo?key=773c4e4c196eb78e21f220e7e14160d2&extensions=all&city=320100',
				    type:"GET",
				    success:function(data){
						$('.weatherTxt').text('今日 ' + data.forecasts[0].casts[0].dayweather  + ' ' + data.forecasts[0].casts[0].nighttemp + '~' + data.forecasts[0].casts[0].daytemp + '℃')
				    }
				});
				
				// 当前显示购票列表
				var currList = [];
				var interSecond = 0;
				// 初始化时间
				setInterval(function(){
					interSecond += 1;
					var year = new Date().getFullYear();
					var month = new Date().getMonth() + 1;
					month = month<10?'0'+month:month;
					var day = new Date().getDate();
					day = day<10?'0'+day:day;
					var hour = new Date().getHours();
					hour = hour<10?'0'+hour:hour;
					var minutes = new Date().getMinutes();
					minutes = minutes<10?'0'+minutes:minutes;
					var seconds = new Date().getSeconds();
					seconds = seconds<10?'0'+seconds:seconds;
					$('.dateTxt').text(year+'/'+month+'/'+day+' '+hour+':'+minutes+':'+seconds);
					var startDate = new Date(new Date().getTime() - (60*1000));
					var startYear = startDate.getFullYear();
					var startMonth = startDate.getMonth() + 1;
					startMonth = startMonth<10?'0'+startMonth:startMonth;
					var startDay = startDate.getDate();
					startDay = startDay<10?'0'+startDay:startDay;
					var startHour = startDate.getHours();
					startHour = startHour<10?'0'+startHour:startHour;
					var startMinutes = startDate.getMinutes();
					startMinutes = startMinutes<10?'0'+startMinutes:startMinutes;
					var startSeconds = startDate.getSeconds();
					startSeconds = startSeconds<10?'0'+startSeconds:startSeconds;
					var startDateString = startYear + '-' + startMonth + '-' + startDay + ' ' + startHour + ':' + startMinutes + ':' + startSeconds;
					var endDateString = year+'-'+month+'-'+day+' '+hour+':'+minutes+':'+seconds
					if(interSecond == 1 || interSecond % 60 == 0){
						// 获取运营时间
						app.getAjax('/battery/getOperation?lineTicketId=', {}, function(res){
							console.log(res.data);
							var nowDay = new Date().getDay();
							if(nowDay == 0){
								nowDay = 6;
							}else{
								nowDay -= 1;
							}
							var startDate;
							var endDate;
							res.data.forEach(function(value, key){
								if(value.lineId == '5'){
									var yyTimeList = value.list;
									startDate = yyTimeList[nowDay].startTime;
									endDate = yyTimeList[nowDay].endTime;
									// if(yyTimeList[nowDay].state == '0'){
									// 	$('.yytime').text(startDate + '至' + endDate);
									// }else{
									// 	$('.yytime').text(yyTimeList[nowDay].tip);
									// }
								}
							})
						})
					}
				}, 1000);
				
				
			</script>
		</div>
	</body>
</html>
